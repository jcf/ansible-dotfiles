#!/usr/bin/env ruby

require 'etc'

def owned_by_current_user(path)
  uid = File.stat(path).uid
  Etc.getpwuid(uid).uid == Etc.getpwuid.uid
end

message = DATA.read

Dir['/dev/ttys*'].each do |path|
  next unless owned_by_current_user(path)
  file = File.open(path, 'a')
  file.puts message
  file.close
end

__END__




You haVe been hack3d by the elite Haxorz!

Your filEz are ours... We can haz y0ur Facebooks!

